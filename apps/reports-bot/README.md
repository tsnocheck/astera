# Reports Bot

–ë–æ—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∂–∞–ª–æ–± —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏.

## –û–ø–∏—Å–∞–Ω–∏–µ

Reports Bot –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∂–∞–ª–æ–± –Ω–∞ Discord —Å–µ—Ä–≤–µ—Ä–µ:

- **–û—Ç–ø—Ä–∞–≤–∫–∞ –∂–∞–ª–æ–±**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∂–∞–ª–æ–±—ã —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- **–°–∏—Å—Ç–µ–º–∞ –≤–µ—Ç–æ–∫**: –ö–∞–∂–¥–∞—è –∂–∞–ª–æ–±–∞ —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–µ—Ç–∫—É –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è
- **–ú–æ–¥–µ—Ä–∞—Ü–∏—è**: –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω—è—Ç—å –∂–∞–ª–æ–±—ã
- **–ó–∞–∫—Ä—ã—Ç–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å –∂–∞–ª–æ–±—ã

## –ö–æ–º–∞–Ω–¥—ã

### `/report-setup`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —ç–º–±–µ–¥ —Å –∫–Ω–æ–ø–∫–æ–π –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∂–∞–ª–æ–± –≤ —Ç–µ–∫—É—â–∏–π –∫–∞–Ω–∞–ª.

## –§—É–Ω–∫—Ü–∏–∏

### üìù –°–æ–∑–¥–∞–Ω–∏–µ –∂–∞–ª–æ–±—ã
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É"
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –∂–∞–ª–æ–±—ã
3. –°–æ–∑–¥–∞–µ—Ç—Å—è –≤–µ—Ç–∫–∞ –≤ –∫–∞–Ω–∞–ª–µ –¥–ª—è –∂–∞–ª–æ–±
4. –í –∫–∞–Ω–∞–ª –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏

### ‚úÖ –ü—Ä–∏–Ω—è—Ç–∏–µ –∂–∞–ª–æ–±—ã (—Ç–æ–ª—å–∫–æ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã)
- –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –≤–µ—Ç–∫—É —Å –∂–∞–ª–æ–±–æ–π
- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–±–∏—Ä–∞—é—Ç—Å—è –∏–∑ –∫–∞–Ω–∞–ª–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- –í –≤–µ—Ç–∫—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–∏–Ω—è—Ç–∏–∏

### ‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∂–∞–ª–æ–±—ã (—Ç–æ–ª—å–∫–æ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã)
- –í–µ—Ç–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏ –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è
- –í –≤–µ—Ç–∫—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏
- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–±–∏—Ä–∞—é—Ç—Å—è

### üîí –ó–∞–∫—Ä—ã—Ç–∏–µ –∂–∞–ª–æ–±—ã
- –î–æ—Å—Ç—É–ø–Ω–æ —Å–æ–∑–¥–∞—Ç–µ–ª—é –∂–∞–ª–æ–±—ã –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –≤–µ—Ç–∫–∏
- –í–µ—Ç–∫–∞ –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.reports` –Ω–∞ –æ—Å–Ω–æ–≤–µ `example.env.reports`:

```env
TOKEN=your_discord_bot_token
MONGO_URL=mongodb://mongo:27017/astera
GUILD_ID=your_guild_id
MODERATOR_ROLES=role_id_1,role_id_2
REPORTS_CHANNEL=channel_id_for_threads
MODERATION_CHANNEL=channel_id_for_moderation
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- `TOKEN` - —Ç–æ–∫–µ–Ω Discord –±–æ—Ç–∞
- `MONGO_URL` - URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB
- `GUILD_ID` - ID –≤–∞—à–µ–≥–æ Discord —Å–µ—Ä–≤–µ—Ä–∞
- `MODERATOR_ROLES` - ID —Ä–æ–ª–µ–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
- `REPORTS_CHANNEL` - ID –∫–∞–Ω–∞–ª–∞, –≥–¥–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –≤–µ—Ç–∫–∏ —Å –∂–∞–ª–æ–±–∞–º–∏
- `MODERATION_CHANNEL` - ID –∫–∞–Ω–∞–ª–∞ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –ø—Ä–∏–Ω—è—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å

## –ó–∞–ø—É—Å–∫

### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
docker-compose -f compose.dev.yaml up -d reports-bot
```

### –õ–æ–∫–∞–ª—å–Ω–æ

```bash
yarn workspace reports-bot build
yarn workspace reports-bot start
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
apps/reports-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ commands/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reportSetup.ts      # –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç–º–±–µ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ events/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ready.ts            # –°–æ–±—ã—Ç–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ createReport.ts     # –°–æ–∑–¥–∞–Ω–∏–µ –∂–∞–ª–æ–±—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ acceptReport.ts     # –ü—Ä–∏–Ω—è—Ç–∏–µ –∂–∞–ª–æ–±—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rejectReport.ts     # –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∂–∞–ª–æ–±—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ closeReport.ts      # –ó–∞–∫—Ä—ã—Ç–∏–µ –∂–∞–ª–æ–±—ã
‚îÇ   ‚îú‚îÄ‚îÄ config.ts               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json
```

## –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞

–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∞–≤–∞:
- Send Messages
- Manage Threads
- Create Public Threads
- Send Messages in Threads
- Embed Links
- Read Message History

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 23+
- MongoDB
- Discord.js 14+
